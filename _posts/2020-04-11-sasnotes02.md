---
layout: posts_nolayout
title: "SAS笔记2"
updated: 2020-04-06 15:56
categories: sas
author: "Jason"
permalink: /:categories/:year:month:day/:title.html
---
**DATA Step Processing**  

1. **Compilation**  

establish data attributes and rules for execution  

* Check for syntax errors
* Create the program data vector (PDV), containing columns and attributes (this is way length statement has to be before if statements)
* Establish rules for processing data in the PDV
* Create descriptor portion of output table  
  (note: drop statement does not drop the column immediately, SAS makes a flag for that column and drops it later)  

2. **Execution**  

read, manipulate, and write DATA    
(简单说,就是把这个section看作一个对每一行observation进行iteration)  

To view the DATA step processing steps, use the **DATA Step Debugger**

**An Example:**

```SAS
data np_parks;
	set pg2.np_final(obs=5); 
	putlog "NOTE: Star data step iteration";
	putlog _all_;
	keep Region ParkName AvgMonthlyVisitors Acres Size; *compile only;
    where Type="PARK"; *compile only;
	format AvgMonthlyVisitors Acres comma10.;*compile only;
	length Size $ 6;
    Type=propcase(Type); 
	putlog Type=;
	AvgMonthlyVisitors=sum(DayVisits,Campers,OtherLodging)/12; 
	if Acres<1000 then Size="Small";
	else if Acres<100000 then Size="Medium";
	else Size="Large";
	putlog "NOTE: End of Data step";
	putlog _all_;
run;
```

